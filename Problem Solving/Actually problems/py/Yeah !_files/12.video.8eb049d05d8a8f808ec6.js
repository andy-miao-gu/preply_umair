(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1069:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),i=a.n(r),s=a(209),o=a(22),l=a.n(o),c=a(12),u=a(38),d=a.n(u),f=a(1737),m=a(32),g=a(198),v=a.n(g),b=a(376),p=a(23),h=a(294),_=a(751),j=a.n(_),y=a(2192),w=a(2200),O=a(1075),E=a(1680),M=a(124);function A(){var e=Object(n.l)(["\n    query ReferralReward {\n        referrerReferralReward {\n            referralDiscount\n            referralRewardLocalized\n            referralReward\n        }\n    }\n"]);return A=function(){return e},e}var k=l()(A()),x=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40"},t),i.a.createElement("rect",{width:"40",height:"40",fill:"#D9F1CD",rx:"20"}),i.a.createElement("path",{stroke:"#50BF16",strokeLinecap:"round",strokeWidth:"2",d:"M23 26a7 7 0 10-5.745-11"}),i.a.createElement("path",{stroke:"#50BF16",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M23 16v3h2.5M15 18v3.667c-3.536 0-6 1.512-6 5.833 2.063-1.964 3.25-2.167 6-2.167V29l5-5.5-5-5.5z"}))},T=a(52);Object(T.a)(".styles_referralIcon__7QQzN svg {\n  width: 40px;\n  height: 40px;\n}\n.styles_referralMessageButton__KJNYp {\n  margin-left: 8px;\n  background: #fff;\n  color: #6f757b;\n  border: 1px solid #aeb5bc;\n  width: 50%;\n  min-height: 18px;\n  white-space: initial;\n}\n.styles_referralMessageButton__KJNYp:hover {\n  background: #aeb5bc;\n  color: #fff;\n}\n.styles_referralMessageButtonInvite__dVr0j {\n  background: #50bf16;\n  color: #fff;\n  border: none;\n  margin-left: 0;\n}\n.styles_referralMessageButtonInvite__dVr0j:hover {\n  background: #54cd14;\n}\n");var C={referralIcon:"styles_referralIcon__7QQzN",referralMessageButton:"styles_referralMessageButton__KJNYp",referralMessageButtonInvite:"styles_referralMessageButtonInvite__dVr0j"},I=a(25),N=a(3);function R(){var e=Object(n.l)(["\n    mutation ReferralBell {\n        storeReferralBellNotificationMutation {\n            ok\n            error\n        }\n    }\n"]);return R=function(){return e},e}function B(){var e=Object(n.l)(["\n    mutation ReferralBellDismiss {\n        storeReferralBellDismissNotificationMutation {\n            ok\n            error\n        }\n    }\n"]);return B=function(){return e},e}var S=function(e){var t=e.className,a=e.children,r=e.invite,o=e.href,l=e.target,c=Object(s.b)(e,["className","children","invite","href","target"]);return i.a.createElement(O.a,Object(n.e)({},c,{className:d()(t,C.referralMessageButton,Object(n.d)({},C.referralMessageButtonInvite,r)),href:o,target:l}),a)},V=l()(B()),L=l()(R()),D=function(e){var t=e.language,a=e.referralMessageIndex,s=e.onActionClick,o=function(e){var t=Object(c.d)(k,{skip:null==e?void 0:e.skip,fetchPolicy:"cache-first"}),a=t.data,n=t.loading,i=t.error,s=a&&a.referrerReferralReward?a.referrerReferralReward:null,o=null;return null!==s&&(o=s.referralRewardLocalized?s.referralRewardLocalized:s.referralReward),Object(r.useEffect)((function(){i&&M.a.withScope((function(e){e.setTag("referral","Failed_to_fetch_referrer_reward_in_navigation"),M.a.captureException(i)}))}),[i]),Object.assign(Object.assign({},s),{error:i,loading:n,referralRewardLocalized:o})}(),l=o.loading,u=o.error,d=function(e){var t=e.index,a=e.referralReward,r=e.referralDiscount,s=[{header:i.a.createElement(I.a,{defaultMessage:"Invite your friends and earn free credits",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Invite your friends and earn free credits","description":"referralBell.header.1"}'}),message:i.a.createElement(I.a,{defaultMessage:"Like your lessons? Share the joy of learning languages!",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Like your lessons? Share the joy of learning languages!","description":"referralBell.message.1"}'}),dismissalText:i.a.createElement(I.a,{defaultMessage:"Dismiss",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Dismiss","description":"referralBell.dismiss.1"}'}),referralText:i.a.createElement(I.a,{defaultMessage:"Invite friends",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Invite friends","description":"referralBell.confirm.1"}'}),mentionsDiscount:!1,eventName:"bell_notif_referral_invite_free_credits"},{header:i.a.createElement(I.a,{defaultMessage:"Refer a friend and earn {referralReward}",values:Object(n.h)({},N.formattedMessageAbTestValues,{},Object.assign({referralReward:a})),id:'{"defaultMessage":"Refer a friend and earn {referralReward}","description":"referralBell.header.2"}'}),message:i.a.createElement(I.a,{defaultMessage:"Learning is more fun with friends. Earn up to {referralReward} for every friend you invite to join Preply.",values:Object(n.h)({},N.formattedMessageAbTestValues,{},Object.assign({referralReward:a})),id:'{"defaultMessage":"Learning is more fun with friends. Earn up to {referralReward} for every friend you invite to join Preply.","description":"referralBell.message.2"}'}),dismissalText:i.a.createElement(I.a,{defaultMessage:"Close",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Close","description":"notification.close"}'}),referralText:i.a.createElement(I.a,{defaultMessage:"Refer a friend",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Refer a friend","description":"referralBell.confirm.2"}'}),mentionsDiscount:!1,eventName:"bell_notif_referral_refer_get5"},{header:i.a.createElement(I.a,{defaultMessage:"Give {referralDiscount}, get {referralReward}",values:Object(n.h)({},N.formattedMessageAbTestValues,{},{referralDiscount:r,referralReward:a}),id:'{"defaultMessage":"Give {referralDiscount}, get {referralReward}","description":"referralBell.header.3"}'}),message:i.a.createElement(I.a,{defaultMessage:"Give your friends {referralDiscount} off their first lesson on Preply, and you’ll get {referralReward} when they make a purchase!",values:Object(n.h)({},N.formattedMessageAbTestValues,{},{referralDiscount:r,referralReward:a}),id:'{"defaultMessage":"Give your friends {referralDiscount} off their first lesson on Preply, and you’ll get {referralReward} when they make a purchase!","description":"referralBell.message.3"}'}),dismissalText:i.a.createElement(I.a,{defaultMessage:"Close",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Close","description":"notification.close"}'}),referralText:i.a.createElement(I.a,{defaultMessage:"Refer a friend",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Refer a friend","description":"referralBell.confirm.2"}'}),mentionsDiscount:!0,eventName:"bell_notif_referral_give30_get5"},{header:i.a.createElement(I.a,{defaultMessage:"Got friends?",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Got friends?","description":"referralBell.header.4"}'}),message:i.a.createElement(I.a,{defaultMessage:"Invite them to join Preply! You’ll get {referralReward} for every friend who starts learning.",values:Object(n.h)({},N.formattedMessageAbTestValues,{},Object.assign({referralReward:a})),id:'{"defaultMessage":"Invite them to join Preply! You’ll get {referralReward} for every friend who starts learning.","description":"referralBell.message.4"}'}),dismissalText:i.a.createElement(I.a,{defaultMessage:"Maybe later",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Maybe later","description":"referralBell.dismiss.4"}'}),referralText:i.a.createElement(I.a,{defaultMessage:"Refer a friend",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Refer a friend","description":"referralBell.confirm.2"}'}),mentionsDiscount:!1,eventName:"bell_notif_referral_got_friends"},{header:i.a.createElement(I.a,{defaultMessage:"Want free lessons?",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Want free lessons?","description":"referralBell.header.5"}'}),message:i.a.createElement(I.a,{defaultMessage:"Refer your friends! Get {referralReward} for every friend who buys their first lesson. Your next lesson could be free!",values:Object(n.h)({},N.formattedMessageAbTestValues,{},{referralReward:a}),id:'{"defaultMessage":"Refer your friends! Get {referralReward} for every friend who buys their first lesson. Your next lesson could be free!","description":"referralBell.message.5"}'}),dismissalText:i.a.createElement(I.a,{defaultMessage:"No, thanks",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"No, thanks","description":"referralBell.dismiss.5"}'}),referralText:i.a.createElement(I.a,{defaultMessage:"Refer a friend",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Refer a friend","description":"referralBell.confirm.2"}'}),mentionsDiscount:!0,eventName:"bell_notif_referral_want_free_lessons"}];return s[t<s.length?t:0]}({referralDiscount:o.referralDiscount,index:u?0:a,referralReward:o.referralRewardLocalized}),f=d.header,g=d.message,v=d.dismissalText,b=d.referralText,p=d.eventName,h=Object(c.c)(V),_=Object(n.k)(h,1)[0],j=Object(c.c)(L),y=Object(n.k)(j,1)[0],w=function(e){return Object(m.C)({buttonName:e,name:p,autoOpened:!0})};return Object(r.useEffect)((function(){y(),Object(m.D)({name:p,autoOpened:!0})}),[y,p]),i.a.createElement(E.a,null,{header:f,message:g,isReferralRewardLoading:l,icon:i.a.createElement("div",{className:C.referralIcon},i.a.createElement(x,{"data-qa-group":"system-message-icon"})),primaryAction:i.a.createElement(S,{invite:!0,href:"https://preply.com/".concat(t,"/referral"),target:"_blank","data-qa-group":"system-message-invite-btn",onClick:function(){s(),Object(m.F)("invite"),w("INVITE")}},b),secondaryAction:i.a.createElement(S,{onClick:function(){s(),_(),Object(m.F)("dismiss"),w("DISMISS")},"data-qa-group":"system-message-dismiss-btn"},v)})};function z(){var e=Object(n.l)(["\n    query ReferralBellStatus {\n        referralBellStatus {\n            showReferralBellNotification\n            referralMessageIndex\n        }\n    }\n"]);return z=function(){return e},e}var U=l()(z()),P={read:function(){var e=localStorage.getItem("nav_kids_search_notification_key");return e?JSON.parse(e):null},store:function(e){localStorage.setItem("nav_kids_search_notification_key",JSON.stringify(e))},remove:function(e){localStorage.removeItem(e)}},W=a(658),H=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("rect",{width:"40",height:"40",rx:"20",fill:"#E8F6F7"}),i.a.createElement("path",{d:"M28.033 7.777a.576.576 0 011.055.462l-1.754 4a5.322 5.322 0 011.83 3.515l.922 11.44c.097 1.358-.325 2.617-1.19 3.546-.815.876-1.95 1.358-3.196 1.358H14.534a4.644 4.644 0 01-3.429-1.517 4.644 4.644 0 01-1.184-3.557l1.07-11.238a5.32 5.32 0 011.709-3.44l-1.796-3.904a.575.575 0 111.046-.481l1.688 3.67c.36-.198.742-.356 1.139-.467L13.01 7.295a.576.576 0 011.048-.478l1.895 4.151c.115-.007.231-.01.348-.01h.26v-.466a2.393 2.393 0 012.39-2.39h2.082a2.393 2.393 0 012.39 2.39v.465h.433c.06 0 .122.001.182.003l1.813-4.139a.575.575 0 111.055.462l-1.685 3.85c.399.104.783.254 1.145.446l1.666-3.802zm-4.176 4.332h-7.555a4.166 4.166 0 00-4.165 3.786l-1.07 11.238a3.491 3.491 0 00.89 2.673 3.489 3.489 0 002.577 1.14H25.7c.923 0 1.758-.352 2.354-.991.643-.692.958-1.641.884-2.675l-.92-11.422a4.19 4.19 0 00-1.518-2.83.577.577 0 01-.234-.101 4.17 4.17 0 00-1.942-.778.587.587 0 01-.108-.025 4.248 4.248 0 00-.36-.015zm-1.584-1.617a1.24 1.24 0 00-1.239-1.239h-2.081a1.24 1.24 0 00-1.24 1.24v.464h4.56v-.465zm4.383 18.274a.576.576 0 01-.573-.521l-.952-10.004c-.002-1.82-1.446-3.277-3.234-3.277H18.09a3.238 3.238 0 00-3.232 3.241l-.954 10.04a.569.569 0 01-.628.518.575.575 0 01-.518-.627l.951-9.985c-.002-2.38 1.97-4.338 4.38-4.338h3.808a4.385 4.385 0 014.383 4.373l.95 9.95a.574.574 0 01-.516.627c-.031.003-.031.003-.058.003zm-6.923-8.227a.573.573 0 01.52 0l.78.394-.172-.88a.593.593 0 01.104-.49l.713-.79h-.746a.575.575 0 01-.517-.322l-.421-.855-.422.855a.576.576 0 01-.517.322h-.742l.28.307.01.01c.237.261.388.43.425.481.101.137.137.316.099.479l-.172.883.778-.395zm3.116-2.918a.576.576 0 01.459.924L22.034 20l.396 1.87a.575.575 0 01-.82.648l-1.571-.843-1.662.843a.576.576 0 01-.821-.645l.419-1.788-1.3-1.545a.577.577 0 01.463-.92h1.559l.78-1.582c.196-.4.837-.4 1.033 0l.78 1.583h1.559zm-.376 8.232c.576.298.952 1.024.952 1.862 0 1.117-.665 2.003-1.528 2.003s-1.528-.886-1.528-2.003c0-.838.376-1.564.952-1.862v-1.37h-4.659a.575.575 0 110-1.152h6.663a.575.575 0 110 1.152h-.852v1.37zm-.576 1.01c-.159 0-.376.38-.376.852s.217.852.376.852.376-.38.376-.852c0-.473-.217-.852-.376-.852z",fill:"#3BB3BD"}))},G=function(e){var t=e.language,a=e.kidTagAliases,n=e.subjectAlias,s=e.onActionClick,o=Object(W.a)({language:t,subjectAlias:n}).findTutorsUrlData;Object(r.useEffect)((function(){Object(m.x)("popup_shown")}),[]);var l=o&&o.findTutorsUrl.name;return i.a.createElement(E.a,null,{header:i.a.createElement(I.a,{defaultMessage:"Looking for the right tutor for your child?",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Looking for the right tutor for your child?","description":""}'}),message:i.a.createElement(I.a,{defaultMessage:"We made a list of expert tutors for you to choose from",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"We made a list of expert tutors for you to choose from","description":""}'}),icon:i.a.createElement(H,null),primaryAction:i.a.createElement(E.b,{primary:!0,"data-qa-id":"nav-kids-search-view-tutors",href:F(a,l),onClick:function(){Object(m.x)("click_show_tutors"),s()}},i.a.createElement(I.a,{defaultMessage:"View tutors",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"View tutors","description":""}'})),secondaryAction:i.a.createElement(E.b,{"data-qa-id":"nav-kids-search-dismiss",onClick:function(){Object(m.x)("click_dismiss"),s()}},i.a.createElement(I.a,{defaultMessage:"Not interested",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Not interested","description":""}'}))})},q=["en_gchi","kids_jschool"].join(","),F=function(e,t){if("undefined"==typeof window||!t)return"";var a=e.length?e.join(","):q;if(t.includes(window.location.pathname)){var r=new URLSearchParams(window.location.search);return r.delete("page"),r.set("tags",a),"".concat(window.location.pathname,"?").concat(r.toString())}var i=new URLSearchParams(Object(n.d)({},"tags",a));return"".concat(t,"?").concat(i.toString())},J=a(568),Y=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("rect",{width:"40",height:"40",rx:"20",fill:"#D6F4CA"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.778 20.686a1 1 0 01-1.705.64l-2.672-2.67c-2.312 2.169-5.126 4.204-7.42 5.732a87.426 87.426 0 01-4.162 2.603l-.26.15-.068.04-.018.01-.005.002-.002.001-.492-.87-.796-.605.001-.002.004-.005.014-.018.055-.072.21-.274a273.636 273.636 0 013.342-4.269c1.754-2.195 3.857-4.746 5.513-6.508l-2.672-2.672a1 1 0 01.64-1.705l10.102-.674a1 1 0 011.064 1.065l-.673 10.101zm-16.804 5.637l.492.872a1 1 0 01-1.288-1.476l.796.604zm4.391-3.995l-.11.139c2.424-1.635 5.279-3.75 7.45-5.922a1 1 0 011.415 0l1.809 1.81.45-6.763-6.762.45 1.809 1.81a1 1 0 010 1.414c-1.639 1.639-4.043 4.538-6.061 7.062zM24 25a1 1 0 112 0v5a1 1 0 11-2 0v-5zm-4 1.5a1 1 0 00-1 1V30a1 1 0 102 0v-2.5a1 1 0 00-1-1zm-6 3a1 1 0 112 0v.5a1 1 0 11-2 0v-.5z",fill:"#24BB36"}))},K=function(e){return"".concat("exp_eng_achievements_mvp","_").concat(e,"_click")};Object(T.a)(".styles_dismissButton__1sxDT {\n  margin-left: 8px;\n  background: #fff;\n  color: #6f757b;\n  border: 1px solid #aeb5bc;\n  width: 50%;\n  min-height: 18px;\n  white-space: initial;\n}\n.styles_dismissButton__1sxDT:hover {\n  background: #aeb5bc;\n  color: #fff;\n}\n.styles_primaryButton__2pGs4 {\n  background: #50bf16;\n  color: #fff;\n  border: none;\n  margin-left: 0;\n  white-space: normal;\n}\n.styles_primaryButton__2pGs4:hover {\n  background: #54cd14;\n}\n");var Q={dismissButton:"styles_dismissButton__1sxDT",primaryButton:"styles_primaryButton__2pGs4"},Z=function(e){var t=e.subjectAlias,a=e.tutoringId,s=e.onClose,o=K(t),l=Object(r.useState)(!0),u=Object(n.k)(l,2),f=u[0],g=u[1],v="/edu/".concat(t,"/classroom-v2/").concat(a,"/achievements?source=bell_adoption"),b=Object(c.c)(J.b),p=Object(n.k)(b,1)[0],h=function(e){Object(m.C)({subject:t,buttonName:e,autoOpened:!0,name:"achievements"}),g(!1),p({variables:{eventName:o}})};return Object(r.useEffect)((function(){Object(m.D)({subject:t,autoOpened:!0,name:"achievements"})}),[t]),f?i.a.createElement(E.a,null,{header:i.a.createElement(I.a,{defaultMessage:"New! Track your achievements",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"New! Track your achievements","description":""}'}),message:i.a.createElement(I.a,{defaultMessage:"See your progress toward the next level",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"See your progress toward the next level","description":""}'}),icon:i.a.createElement(Y,{"data-qa-group":"bell-notification--icon"}),primaryAction:i.a.createElement(O.a,{className:d()(Q.primaryButton),href:v,"data-qa-group":"bell-notification-competencies-track-progress-lessons-btn",onClick:function(){return h("START")}},i.a.createElement(I.a,{defaultMessage:"Track Progress",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Track Progress","description":""}'})),secondaryAction:i.a.createElement(O.a,{className:d()(Q.dismissButton),onClick:function(){h("DISMISS"),s()},"data-qa-group":"bell-notification-competencies-dismiss-btn"},i.a.createElement(I.a,{defaultMessage:"Dismiss",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Dismiss","description":""}'}))}):null},$=a(288),X=a(67),ee=a(193),te=a(89),ae=function(e){return(null==e?void 0:e.group)===$.d.LanguageGroup?e.alias:""};function ne(){var e=Object(n.l)(["\n    query AllAchievementCertificate {\n        allAchievementCertificates {\n            currentLevel\n            nextLevel\n            hoursToNextLevel\n            downloadUrl\n            subject {\n                id\n                alias\n                translatedName\n            }\n            completedHours\n        }\n    }\n"]);return ne=function(){return e},e}var re=l()(ne()),ie=a(39);function se(){var e=Object(n.l)(["\n    mutation GamificationEvent($eventName: String!) {\n        gamificationEventMutation(eventName: $eventName) {\n            ok\n        }\n    }\n"]);return se=function(){return e},e}var oe=l()(se()),le=a(1608),ce=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("rect",{width:"40",height:"40",rx:"20",fill:"#D6F4CA"}),i.a.createElement("path",{d:"M16 24v5l4-2.564L24 29v-5M20.757 22.121a1 1 0 01-1.515 0l-1.405-1.63-2.15-.082a1 1 0 01-.945-1.185l.399-2.115-1.277-1.732A1 1 0 0114.2 13.9l1.902-1.007.558-2.079a1 1 0 011.366-.657l1.973.86 1.973-.86a1 1 0 011.365.657l.558 2.079L25.8 13.9a1 1 0 01.337 1.477l-1.277 1.732.399 2.115a1 1 0 01-.945 1.185l-2.15.082-1.406 1.63z",stroke:"#50BF16",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},ue=a(19),de=a(5);function fe(){var e=Object(n.l)(["\n&, && { \n    background-color: white;\n    color: ",";\n    border: 1px solid ",";\n    margin-left: ",";\n\n    &:hover {\n        background: @colors-grey-g3;\n        color: white;\n    }\n }\n"]);return fe=function(){return e},e}function me(){var e=Object(n.l)(["\n&, && { \n    background-color: ",";\n    color: white;\n    white-space: break-spaces;\n\n    &:hover {\n        background: #54cd14;\n    }\n }\n"]);return me=function(){return e},e}function ge(){var e=Object(n.l)(["\n&, && { \n    border-radius: 2px;\n    font-weight: ",";\n    font-size: ",";\n    line-height: ",";\n    text-align: center;\n    padding: ",";\n    font-weight: ",";\n }\n"]);return ge=function(){return e},e}var ve=Object(de.default)(O.a)(ge(),ue.i.weights.medium,ue.i.sizes.m,ue.i.lineHeights.base,ue.m.xxs,ue.i.weights.medium),be=Object(de.default)(ve)(me(),ue.b.p.green),pe=Object(de.default)(ve)(fe(),ue.b.grey.g1,ue.b.grey.g3,ue.m.xxs),he=function(e){var t=e.downloadURL,a=e.onClick,s=Object(r.useState)(!1),o=Object(n.k)(s,2),l=o[0],c=o[1];return i.a.createElement(be,{onClick:function(){a(),c(!0)},disabled:l,href:t,target:"_blank"},i.a.createElement(I.a,{defaultMessage:"Get certificate",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Get certificate","description":""}'}))};function _e(){var e=Object(n.l)(["\n    mutation IssueAchievementCertificate($subjectAlias: String!) {\n        issueAchievementCertificate(subjectAlias: $subjectAlias) {\n            downloadUrl\n        }\n    }\n"]);return _e=function(){return e},e}var je=l()(_e()),ye=function(e){var t=e.completedHours,a=e.currentLevel,s=e.subject,o=e.toggleModal,l=Object(r.useState)(!0),u=Object(n.k)(l,2),d=u[0],f=u[1],m=Object(r.useState)(""),g=Object(n.k)(m,2),v=g[0],b=g[1],p=function(e){var t=e.eventName,a=Object(c.c)(oe,{variables:{eventName:t}});return Object(n.k)(a,1)[0]}({eventName:"".concat("exp_eng_cert_achievement","-").concat(null==s?void 0:s.alias,"-").concat(a)}),h=Object(c.c)(je,{variables:{subjectAlias:(null==s?void 0:s.alias)||""}}),_=Object(n.k)(h,1)[0];Object(r.useEffect)((function(){_&&_().then((function(e){var t,a,n=null===(a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.issueAchievementCertificate)||void 0===a?void 0:a.downloadUrl;n&&b(n)}))}),[_]);Object(r.useEffect)((function(){d&&Object(ie.b)({event_name:"notification_popup_viewed",json_data:JSON.stringify({notification_name:"certificate_achieved",subject:null==s?void 0:s.alias,hours_subject:t})})}),[d,null==s?void 0:s.alias,t]);var j=Object(le.capitalize)((null==s?void 0:s.translatedName)||"");return d?i.a.createElement(E.a,null,{header:i.a.createElement(I.a,{defaultMessage:"Congrats! You earned a new {subject} certificate",values:Object(n.h)({},N.formattedMessageAbTestValues,{},{subject:j}),id:'{"defaultMessage":"Congrats! You earned a new {subject} certificate","description":""}'}),message:i.a.createElement(I.a,{defaultMessage:"Download your {hours} hour certificate now and celebrate your progress",values:Object(n.h)({},N.formattedMessageAbTestValues,{},{hours:a}),id:'{"defaultMessage":"Download your {hours} hour certificate now and celebrate your progress","description":""}'}),icon:i.a.createElement(ce,null),primaryAction:i.a.createElement(he,{onClick:function(){Object(ie.b)({event_name:"notification_popup_clicked",json_data:JSON.stringify({notification_name:"certificate_achieved",subject:null==s?void 0:s.alias,hours_subject:t,button:"DOWNLOAD_CERTIFICATE",auto_opened:!0})}),p(),f(!1),o(!1)},downloadURL:v}),secondaryAction:i.a.createElement(pe,{onClick:function(){Object(ie.b)({event_name:"notification_popup_clicked",json_data:JSON.stringify({notification_name:"certificate_achieved",subject:null==s?void 0:s.alias,hours_subject:t,button:"DISMISS",auto_opened:!0})}),p(),f(!1),o(!1)}},i.a.createElement(I.a,{defaultMessage:"Dismiss",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Dismiss","description":""}'}))}):null},we=a(7),Oe=a(126),Ee=a(276),Me=a(1030),Ae=a(510),ke=a(183),xe=a(433),Te=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("rect",{width:"40",height:"40",rx:"20",fill:"#E4EBFD"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 14v-1a1 1 0 011-1h4a1 1 0 011 1v1h-6zm10 0h-2v-1a3 3 0 00-3-3h-4a3 3 0 00-3 3v1h-2a2 2 0 00-2 2v3c0 1.014.378 1.94 1 2.646V25a4 4 0 004 4h8a4 4 0 004-4v-3.354c.622-.705 1-1.632 1-2.646v-3a2 2 0 00-2-2zm-1 8.874A4.01 4.01 0 0125 23h-2a1 1 0 01-1 1h-4a1 1 0 01-1-1h-2a4.01 4.01 0 01-1-.126V25a2 2 0 002 2h8a2 2 0 002-2v-2.126zM13 16h14v3a2 2 0 01-2 2H15a2 2 0 01-2-2v-3z",fill:"#3858C2"}))};Object(T.a)(".styles_closeButton__2ttpp {\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  outline: inherit;\n}\n");var Ce={closeButton:"styles_closeButton__2ttpp"};function Ie(){var e=Object(n.l)(["\n    query ShouldAskForHW {\n        homework {\n            askForHomework\n        }\n    }\n"]);return Ie=function(){return e},e}var Ne=l()(Ie()),Re=Object(we.f)({btn:{id:'{"defaultMessage":"Close","description":""}',defaultMessage:"Close"}}),Be=function(){var e,t,a,n,i,s,o,l=Object(c.d)(J.c,{variables:{amongAllLessons:!0}}),u=l.data,d=l.error;Object(r.useEffect)((function(){d&&M.a.withScope((function(e){e.setTag("Notifications","HomeworkRequestReminder"),e.setLevel(ee.a.Critical),M.a.captureException(d)}))}),[d]);var f=null===(e=null==u?void 0:u.currentUser)||void 0===e?void 0:e.lastLesson,m=null===(a=null===(t=null==f?void 0:f.tutoring.tutor)||void 0===t?void 0:t.user)||void 0===a?void 0:a.id,g=null===(n=null==u?void 0:u.currentUser)||void 0===n?void 0:n.nearestLesson,v=null===(o=null===(s=null===(i=null==g?void 0:g.tutoring)||void 0===i?void 0:i.tutor)||void 0===s?void 0:s.user)||void 0===o?void 0:o.id;return{tutorId:m||v,lessonId:(null==f?void 0:f.id)||(null==g?void 0:g.id)}},Se=function(e){var t=e.language,a=Object(Oe.a)(),r=Be(),s=r.tutorId,o=r.lessonId,l=Object(xe.b)("".concat("homework_request_reminder","_").concat(o),!o),c="/".concat(t,"/messages/").concat(s);return i.a.createElement(E.a,null,{header:i.a.createElement(Ee.a,{justifyContent:"space-between"},i.a.createElement("div",null,i.a.createElement(I.a,{id:"navigation.homeworkRequestReminder.notification.preHeader",defaultMessage:"Ask for some homework",values:N.formattedMessageAbTestValues})),i.a.createElement("button",{onClick:function(){return l()},className:Ce.closeButton,"aria-label":a.formatMessage(Re.btn,Object(n.h)({},N.formatMessageAbTestValuesAlwaysAVersion,{},Object(n.h)({},N.formatMessageAbTestValuesAlwaysAVersion,{},Object(n.h)({},N.formatMessageAbTestValuesAlwaysAVersion,{},N.formatMessageAbTestValuesAlwaysAVersion))))},i.a.createElement(Me.a,{svg:ke.a,size:"2xs","aria-hidden":!0,color:"gray-300"}))),message:i.a.createElement(I.a,{id:"navigation.homeworkRequestReminder.notification.message",defaultMessage:"Want to progress faster? Ask your tutor for some homework",values:N.formattedMessageAbTestValues}),icon:i.a.createElement(Te,null),primaryAction:i.a.createElement(Ae.a,{url:c,opensInNewTab:!0,onClick:function(){l(),Object(ie.b)({event_name:"notification_popup_clicked",json_data:JSON.stringify({notification_name:"homework_reminder",button:"HOMEWORK"})})}},i.a.createElement(I.a,{id:"navigation.homeworkRequestReminder.notification.cta",defaultMessage:"Ask for homework",values:N.formattedMessageAbTestValues}))})},Ve=a(287),Le=function(e){var t=e.language,a=e.handleRewindNotificationInteraction,n=e.rewindId;return i.a.createElement(E.a,null,{header:i.a.createElement(I.a,{defaultMessage:"Open Preply Rewind",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Open Preply Rewind","description":""}'}),message:i.a.createElement(I.a,{defaultMessage:"See your language learning progress with Preply Rewind.",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"See your language learning progress with Preply Rewind.","description":""}'}),icon:i.a.createElement(Ve.a,{"data-qa-group":"bell-notification--icon"}),primaryAction:i.a.createElement(E.b,{primary:!0,href:((new URLSearchParams).append("entrypoint","navigation"),"/".concat(t,"/preply-rewind/").concat(n)),onClick:a},i.a.createElement(I.a,{defaultMessage:"View Rewind",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"View Rewind","description":""}'})),secondaryAction:i.a.createElement(E.b,{onClick:a},i.a.createElement(I.a,{defaultMessage:"Dismiss",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Dismiss","description":""}'}))})};function De(){var e=Object(n.l)(["\n    query CheckUserHasRewind {\n        checkUserHasRewind {\n            isEligible\n            rewindId\n        }\n    }\n"]);return De=function(){return e},e}var ze=l()(De()),Ue=a(361),Pe=a(328),We=a(481),He=a(305),Ge=a(482),qe=function(e){var t=e.language,a=e.handleGroupCoursesInteraction;Object(r.useEffect)((function(){Object(ie.b)({event_name:"gc_entry_point_viewed",json_data:JSON.stringify({source:"notification_bell"})})}),[]);var n,s=Object(r.useCallback)((function(){Object(ie.b)({event_name:"gc_entry_point_clicked",json_data:JSON.stringify({source:"notification_bell"})}),a()}),[a]),o=i.a.createElement(Ee.a,{direction:"column"},i.a.createElement(Ee.a,{justifyContent:"space-between"},i.a.createElement(Pe.a,{variant:"xs",color:"gray-400"},i.a.createElement("span",{className:He.a.introText},i.a.createElement(I.a,{id:"navigation.crossSellV2Pro.notification.preHeader",defaultMessage:"INTRODUCING",values:N.formattedMessageAbTestValues}))),i.a.createElement("span",{onClick:a},i.a.createElement(Me.a,{svg:ke.a,color:"gray-300",size:"2xs"}))),i.a.createElement(Pe.a,{color:"gray-500",variant:"m-bold"},i.a.createElement(Ee.a,{alignItems:"center"},i.a.createElement(I.a,{id:"navigation.crossSellV2Pro.notification.header",defaultMessage:"Group classes",values:N.formattedMessageAbTestValues}),i.a.createElement(Ge.a,null,i.a.createElement(I.a,{id:"navigation.crossSellV2Pro.notification.badgeNew",defaultMessage:"NEW",values:N.formattedMessageAbTestValues})))));return i.a.createElement(E.a,null,{header:o,message:i.a.createElement(Pe.a,{variant:"s",color:"gray-400"},i.a.createElement(I.a,{id:"navigation.crossSellV2Pro.notification.message",defaultMessage:"Learn, speak, and connect in a small group",values:N.formattedMessageAbTestValues})),icon:i.a.createElement("img",{className:He.a.logo,src:"https://tutors-content.s3.eu-west-1.amazonaws.com/Group+Lesson+tutor+profiles/GC+General+%E2%80%93+%232+1.png",alt:"announcement"}),primaryAction:i.a.createElement(Ae.a,{onClick:s,url:(n=new URLSearchParams,n.append("entrypoint","notification_bell"),"".concat(Object(We.a)(t),"?").concat(n)),fullWidth:!0},i.a.createElement(I.a,{id:"navigation.crossSellV2Pro.notification.cta",defaultMessage:"Browse classes",values:N.formattedMessageAbTestValues}))})},Fe=a(559);function Je(){var e=Object(n.l)(["\n    query TopUpHoursNotification {\n        currentUser {\n            id\n            client {\n                id\n                subscriptionType\n                tutorings {\n                    nodes {\n                        id\n                        hours\n                        refill {\n                            id\n                            refillHours\n                            status\n                        }\n                    }\n                }\n            }\n        }\n    }\n"]);return Je=function(){return e},e}var Ye=l()(Je()),Ke=function(e){var t=e.showTopUpModal;return i.a.createElement(E.a,null,{header:i.a.createElement(I.a,{defaultMessage:"Keep up your impressive pace!",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Keep up your impressive pace!","description":"notifications.topUp.header"}'}),message:i.a.createElement(I.a,{defaultMessage:"Add extra lesson hours to continue learning before your plan renews.",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Add extra lesson hours to continue learning before your plan renews.","description":"notifications.topUp.message"}'}),primaryAction:i.a.createElement(Ae.a,{fullWidth:!0,onClick:t},i.a.createElement(I.a,{defaultMessage:"Add extra hours",values:N.formattedMessageAbTestValues,id:'{"defaultMessage":"Add extra hours","description":"notifications.topUp.cta"}'}))})},Qe=a(1059);function Ze(){var e=Object(n.l)(["\n&, && { \n    border: none;\n    margin: 0;\n    padding: 0;\n    width: auto;\n    overflow: visible;\n    background: transparent;\n    cursor: pointer;\n }\n"]);return Ze=function(){return e},e}var $e=de.default.button(Ze()),Xe=function(e){var t=e.language,a=e.handleTutorCommunityMessageInteraction;Object(r.useEffect)((function(){Object(m.D)({name:"bell_notif_tutor_community",autoOpened:!1})}),[]);var n,s=i.a.createElement(Ee.a,{direction:"column"},i.a.createElement(Ee.a,{justifyContent:"space-between"},i.a.createElement(Pe.a,{variant:"xs-medium",color:"gray-400"},i.a.createElement(I.a,{id:"navigation.tutor_community.message.pre_header.text",defaultMessage:"NOTIFICATIONS",values:N.formattedMessageAbTestValues})),i.a.createElement($e,{onClick:a},i.a.createElement(Me.a,{svg:ke.a,color:"gray-300",size:"2xs"}))),i.a.createElement(Pe.a,{color:"gray-500",variant:"m-bold"},i.a.createElement(Ee.a,{alignItems:"center",gap:"3xs"},i.a.createElement(I.a,{id:"navigation.tutor_community.message.header.text",defaultMessage:"Tutors community",values:N.formattedMessageAbTestValues}),i.a.createElement(Pe.a,{color:"green-100",variant:"xs-medium"},i.a.createElement(Qe.a,{size:"xs",color:"green",inverted:!0},i.a.createElement(I.a,{id:"navigation.tutor_community.message.badge.text",defaultMessage:"New",values:N.formattedMessageAbTestValues}))))));return i.a.createElement(E.a,null,{header:s,message:i.a.createElement(Pe.a,{variant:"s",color:"gray-400"},i.a.createElement(I.a,{id:"navigation.tutor_community.message.description.text",defaultMessage:"You've got new notifications from the tutor community",values:N.formattedMessageAbTestValues})),primaryAction:i.a.createElement(Ae.a,{onClick:function(){Object(m.C)({name:"bell_notif_tutor_community",buttonName:"VIEW",autoOpened:!1})},url:(n=new URLSearchParams,n.append("redirect_to","/notifications"),"/".concat(t,"/community?").concat(n)),fullWidth:!0},i.a.createElement(I.a,{id:"navigation.tutor_community.message.cta.text",defaultMessage:"View notifications",values:N.formattedMessageAbTestValues}))})};function et(){var e=Object(n.l)(["\n    query Notifications {\n        currentUser {\n            id\n            client {\n                id\n                isEnterprise\n                unconfirmedLessons {\n                    nodes {\n                        id\n                        status\n                        datetime\n                        hasIssue\n                        autoConfirmation\n                        rating {\n                            id\n                        }\n                        tutor {\n                            id\n                            fullName\n                            user {\n                                id\n                                profile {\n                                    id\n                                    avatarUrl\n                                }\n                            }\n                        }\n                    }\n                }\n                passedHours\n            }\n            tutor {\n                id\n            }\n        }\n    }\n"]);return et=function(){return e},e}a.d(t,"NotificationIconWrap",(function(){return at})),a.d(t,"Notifications",(function(){return nt}));var tt=l()(et()),at=function(e){var t=e.className,a=e.children,r=e.popupVisible,o=Object(s.b)(e,["className","children","popupVisible"]);return i.a.createElement("div",Object(n.e)({},o,{className:d()(t,y.a.notificationIconWrap,Object(n.d)({},y.a.notificationIconWrapVisible,r))}),a)},nt=i.a.forwardRef((function(e,t){var a,s,o,l,u=e.language,g=e.timezone,_=e.isTutorNotificationBellActive,y=Object(c.d)(tt,{skip:"undefined"==typeof window,fetchPolicy:"no-cache"}),O=y.loading,E=y.data,A=v()(E,"currentUser.client.passedHours"),k=v()(E,"currentUser.client.isEnterprise"),x=Boolean(v()(E,"currentUser.tutor.id")),T=Boolean(v()(E,"currentUser.client.id")),C=function(e){var t,a,i=Object(c.d)(U,{fetchPolicy:"cache-first"}).data,s=new URLSearchParams(location.search),o=s.has("referralMessageIndex"),l=o?parseInt(s.get("referralMessageIndex")||"0",10):0,u=(null===(t=null==i?void 0:i.referralBellStatus)||void 0===t?void 0:t.showReferralBellNotification)||o,d=e>=2||o,f=Object(r.useState)(o),m=Object(n.k)(f,2),g=m[0],v=m[1],b=Object(r.useState)(o),p=Object(n.k)(b,2),h=p[0],_=p[1],j=Object(r.useState)(l),y=Object(n.k)(j,2),w=y[0],O=y[1],E=null===(a=null==i?void 0:i.referralBellStatus)||void 0===a?void 0:a.referralMessageIndex;Object(r.useEffect)((function(){d&&(_(u),v(u),O(E))}),[d,u,E]);return{onActionClick:function(){v(!1),_(!1)},openByDefault:h,referralMessageIndex:w,showMessage:g}}(A),I=Object(r.useState)(C.openByDefault),N=Object(n.k)(I,2),R=N[0],B=N[1],S=window.location.pathname.includes("lessons"),V=window.location.pathname.includes("/stand-with-ukraine"),L=window.location.pathname.includes("/home"),z=S||V||L,W=function(e){var t,a=Be().lessonId,r=Object(xe.a)("".concat("homework_request_reminder","_").concat(a),!!(null==e?void 0:e.skip)||!a),i=r.isActive,s=r.loading,o=!!(null==e?void 0:e.skip)||!!i||s||!a,l=Object(c.d)(Ne,{skip:o}),u=l.data,d=l.loading,f=null===(t=null==u?void 0:u.homework)||void 0===t?void 0:t.askForHomework,m=Object(X.a)("exp_comms_request_homework_notification_ML",{skip:o||!f}),g=Object(n.k)(m,2),v=g[0],b=g[1];return o?{isActive:!1,isLoading:!1}:{isActive:v,isLoading:b||d||s}}({skip:!T}).isActive,H=function(e){var t,a=Object(r.useState)(""),i=Object(n.k)(a,2),s=i[0],o=i[1],l=Object(r.useState)(""),u=Object(n.k)(l,2),d=u[0],f=u[1],m=Object(r.useState)(0),g=Object(n.k)(m,2),v=g[0],b=g[1],p=Object(r.useState)(0),h=Object(n.k)(p,2),_=h[0],j=h[1],y=Object(X.b)("exp_eng_achievements_mvp"),w=Object(n.k)(y,2),O=w[0],E=w[1],A=E.isActive,k=E.status,x=Object(c.d)(J.c,{variables:{amongAllLessons:!0}}),T=x.data,C=x.loading,I=x.error,N=Object(c.d)(J.d,{variables:{eventName:K(s)},skip:!s,fetchPolicy:"no-cache"}),R=N.data,B=N.loading,S=N.error,V=Object(c.d)(J.a,{variables:{subjectAlias:s},fetchPolicy:"no-cache"}),L=V.data,D=V.loading,z=V.error,U=window.matchMedia("only screen and (max-width: 760px)").matches,P=Object(c.c)(J.e),W=Object(n.k)(P,1)[0],H=!U&&"A1"===d&&!D,G=H&&!e,q=H&&e,F=Object(X.c)("enable_achievements_for_b2b",{skip:e}),Y=F.flagValue,Q=F.loading;Object(r.useEffect)((function(){(I||z||S)&&M.a.withScope((function(e){e.setTag("Notifications","useCompetenciesMessage"),e.setLevel(ee.a.Critical),M.a.captureException("".concat(I,",").concat(z,", ").concat(S))}))}),[I,z,S]),Object(r.useEffect)((function(){G&&O()}),[G,O]),Object(r.useEffect)((function(){G&&A&&W({variables:{data:{subjectAlias:s,initialTutorId:v}}})}),[v,A,W,s,G]),Object(r.useEffect)((function(){q&&Y&&!Q&&W({variables:{data:{subjectAlias:s,initialTutorId:v}}})}),[q,Y,Q,W,s,v]),Object(r.useEffect)((function(){var e,t,a,n,r,i,l,c,u,d,f,m,g,v,p,h,_,y,w,O,E,M,A,k;if(!s&&!C&&!U){var x=ae(null===(n=null===(a=null===(t=null===(e=null==T?void 0:T.currentUser)||void 0===e?void 0:e.nearestLesson)||void 0===t?void 0:t.tutoring)||void 0===a?void 0:a.lead)||void 0===n?void 0:n.subject),I=null===(c=null===(l=null===(i=null===(r=null==T?void 0:T.currentUser)||void 0===r?void 0:r.nearestLesson)||void 0===i?void 0:i.tutoring)||void 0===l?void 0:l.tutor)||void 0===c?void 0:c.id,N=null===(f=null===(d=null===(u=null==T?void 0:T.currentUser)||void 0===u?void 0:u.nearestLesson)||void 0===d?void 0:d.tutoring)||void 0===f?void 0:f.id;!x&&(null===(m=null==T?void 0:T.currentUser)||void 0===m?void 0:m.lastLesson)&&Math.abs(Object(te.g)(null===(g=null==T?void 0:T.currentUser)||void 0===g?void 0:g.lastLesson.datetime))<1296e6&&(x=ae(null===(_=null===(h=null===(p=null===(v=null==T?void 0:T.currentUser)||void 0===v?void 0:v.lastLesson)||void 0===p?void 0:p.tutoring)||void 0===h?void 0:h.lead)||void 0===_?void 0:_.subject),I=null===(E=null===(O=null===(w=null===(y=null==T?void 0:T.currentUser)||void 0===y?void 0:y.lastLesson)||void 0===w?void 0:w.tutoring)||void 0===O?void 0:O.tutor)||void 0===E?void 0:E.id,N=null===(k=null===(A=null===(M=null==T?void 0:T.currentUser)||void 0===M?void 0:M.lastLesson)||void 0===A?void 0:A.tutoring)||void 0===k?void 0:k.id),x&&I&&N&&(o(x),b(I),j(N))}}),[s,T,C,U]),Object(r.useEffect)((function(){s&&!D&&f((null==L?void 0:L.goalCurrentLevel)||"")}),[s,D,L]);var Z=!(null===(t=null==R?void 0:R.gamificationEvent)||void 0===t?void 0:t.occurred);return{subjectAlias:s,tutoringId:_,isActive:A&&!Z,loading:(C||D||B)&&"READY"!==k}}(k),q=H.subjectAlias,F=H.tutoringId,Y=H.isActive,Q=function(){var e=Object(r.useState)(!1),t=Object(n.k)(e,2),a=t[0],i=t[1],s=Object(r.useState)(null),o=Object(n.k)(s,2),l=o[0],u=o[1],d=Object(X.b)("exp_hackathon_preply_rewind"),f=Object(n.k)(d,1)[0],m=Object(c.d)(ze),g=m.data,v=m.loading;Object(r.useEffect)((function(){!localStorage.getItem("preply_rewind_announcement_last_shown_at")&&!v&&g&&g.checkUserHasRewind.isEligible&&(u(g.checkUserHasRewind.rewindId),f().then((function(e){return i(e)})))}),[f,g,v]);return{rewindId:l,handleRewindNotificationInteraction:function(){i(!1),localStorage.setItem("preply_rewind_announcement_last_shown_at",String(Date.now()))},isRewindNotificationActive:a}}(),ne=Q.rewindId,ie=Q.isRewindNotificationActive,se=Q.handleRewindNotificationInteraction,oe=function(){var e=Object(c.d)(re),t=e.data,a=e.loading,i=e.error,s=Object(X.b)("exp_eng_certificate_achieved_bell_notif"),o=Object(n.k)(s,1)[0],l=Object(X.c)("exp_eng_certificate_achieved_bell_notif"),u=l.loading,d=l.flagValue,f=Object(r.useState)([]),m=Object(n.k)(f,2),g=m[0],v=m[1];return Object(r.useEffect)((function(){i&&M.a.withScope((function(e){e.setTag("Notifications","useCertificateAchievementQuery"),e.setLevel(ee.a.Critical),M.a.captureException(i)}))}),[i]),Object(r.useEffect)((function(){t&&!a&&o()}),[t,a,o]),Object(r.useEffect)((function(){var e;d&&t&&(null===(e=t.allAchievementCertificates)||void 0===e?void 0:e.length)?v(t.allAchievementCertificates):v([])}),[d,t]),{isActive:!!d,achievements:g,loading:u||a}}(),le=oe.isActive,ce=oe.achievements,ue=function(e,t){var a=Object(r.useState)(!1),i=Object(n.k)(a,2),s=i[0],o=i[1],l=Object(Ue.a)({isAuthenticated:e,isEnterprise:t}),c=l.showGroupClassesEP,u=l.hasGroupClassPayment;Object(r.useEffect)((function(){localStorage.getItem("gc_cross_sell_notification_last_shown_at")||o(c&&!u)}),[c,u]);return{handleGroupCoursesInteraction:function(){localStorage.setItem("gc_cross_sell_notification_last_shown_at",String(Date.now())),o(!1)},isCoursesCrossSellNotificationActive:s}}(Boolean(null==E?void 0:E.currentUser),Boolean(null===(s=null===(a=null==E?void 0:E.currentUser)||void 0===a?void 0:a.client)||void 0===s?void 0:s.isEnterprise)),de=ue.isCoursesCrossSellNotificationActive,fe=ue.handleGroupCoursesInteraction,me=Object(b.a)({skip:!x||!_}),ge=me.tutorCommunityNotificationCount,ve=me.isTutorCommunityMessageViewed,be=me.handleTutorCommunityMessageInteraction,pe=me.isTutorCommunityMessageLoading,he=function(){var e=Object(r.useContext)(Fe.a).subscriptions,t=null==e?void 0:e.TopUpModal,a=Object(r.useState)(!1),i=Object(n.k)(a,2),s=i[0],o=i[1],l=Object(r.useState)(null),u=Object(n.k)(l,2),d=u[0],f=u[1],m=Object(r.useState)(!1),g=Object(n.k)(m,2),v=g[0],b=g[1],p=Object(c.d)(Ye).data;return Object(r.useEffect)((function(){var e,t,a,n,r;if(p&&(null===(t=null===(e=null==p?void 0:p.currentUser)||void 0===e?void 0:e.client)||void 0===t?void 0:t.subscriptionType)===$.e.SubscribeToTutor){var i=((null===(r=null===(n=null===(a=null==p?void 0:p.currentUser)||void 0===a?void 0:a.client)||void 0===n?void 0:n.tutorings)||void 0===r?void 0:r.nodes)||[]).find((function(e){return e.refill&&e.refill.status===$.c.Configured&&e.hours/e.refill.refillHours*100<=25})),s=localStorage.getItem("top_up_hours_notification_last_shown_at"),o=!1;if(s)o=Math.round((new Date).getTime()-new Date(Number(s)).getTime())/864e5<20;i&&!o&&(localStorage.setItem("top_up_hours_notification_last_shown_at",String(Date.now())),f(i.id),b(!0))}}),[p]),{isTopUpHoursNotificationActive:v,topUpTutoringId:d,TopUpModal:t,showTopUpModal:s,setShowTopUpModal:o}}(),_e=he.showTopUpModal,je=he.setShowTopUpModal,we=he.topUpTutoringId,Oe=he.TopUpModal,Ee=he.isTopUpHoursNotificationActive,Me=le&&ce.length>0;Object(r.useEffect)((function(){z||B(C.openByDefault||Y||de||ie||Ee||Me)}),[z,C.openByDefault,Me,Y,ie,de,Ee]);var Ae=ce.map((function(e){var t;return i.a.createElement(ye,Object(n.e)({key:"".concat(null===(t=null==e?void 0:e.subject)||void 0===t?void 0:t.alias,"-").concat(e.currentLevel)},Object.assign(Object.assign({},e),{toggleModal:function(){B(!1)}})))})).filter(Boolean),ke=function(e){e?Object(m.E)("open"):Object(m.E)("close"),B(e)},Te=function(){ke(!R)},Ce=!O&&E&&(null===(l=null===(o=E.currentUser)||void 0===o?void 0:o.client)||void 0===l?void 0:l.unconfirmedLessons.nodes)?j()(E.currentUser.client.unconfirmedLessons.nodes.filter((function(e){return"SCHEDULED_PAST"===e.status&&!e.hasIssue&&!e.autoConfirmation&&!e.rating}))):[],Ie=function(e){var t=Object(r.useState)(),a=Object(n.k)(t,2),i=a[0],s=a[1];Object(r.useEffect)((function(){var t=P.read();null!==t&&"CREATED"===t.status&&(s(t),e.openPopup());var a=localStorage.getItem("nav_kids_search_notification");if(a){var n={status:a,kidTagAliases:[],subjectAlias:"english",subjectsAknowledged:[]};s(n),e.openPopup(),P.store(n),P.remove("nav_kids_search_notification"),Object(m.x)("persistence_migrate")}}),[]);return{notificationState:i,createNotification:function(t){var a=P.read();if(null===a||a.subjectAlias!==t.subjectAlias&&!a.subjectsAknowledged.includes(t.subjectAlias)){var n={status:"CREATED",kidTagAliases:t.kidTagAliases,subjectAlias:t.subjectAlias,subjectsAknowledged:a?a.subjectsAknowledged:[]};s(n),P.store(n),e.openPopup()}else if("CREATED"===a.status){if(a.subjectAlias!==t.subjectAlias){var r=Object.assign(Object.assign({},a),{kidTagAliases:t.kidTagAliases,subjectAlias:t.subjectAlias});s(r),P.store(r)}e.openPopup()}},onActionClick:function(){var e=Object.assign(Object.assign({},i),{status:"ACKNOWLEDGED_SHOW_SURVEY",subjectsAknowledged:[].concat(Object(n.m)(i.subjectsAknowledged),[i.subjectAlias])});s(e),P.store(e)}}}({openPopup:function(){return ke(!0)}}),Re=Ie.notificationState&&"CREATED"===Ie.notificationState.status,Ve=C.showMessage?1:0,De=Ce.length+Ve+(Re?1:0)+(W?1:0)+(z&&Y?1:0)+(z&&de?1:0)+(z&&ie?1:0)+(z&&Ee?1:0)+(z&&Me?1:0),Pe=x?!ve&&ge?1:0:De;Object(r.useImperativeHandle)(t,(function(){return{createKidsSearchNotification:Ie.createNotification}}),[Ie.createNotification]);return O||pe?null:i.a.createElement("div",{className:d()(h.a.iconItem,"".concat("ignore-onclickoutside-notification"," ").concat(R?"active":""))},i.a.createElement(at,{onClick:Te,popupVisible:R,"data-qa-id":"header-notification-icon"},i.a.createElement("div",{className:h.a.bellIcon},i.a.createElement(f.a,{onClick:function(){R?Object(m.p)(p.a.BellIcon,"close"):Object(m.p)(p.a.BellIcon,"open"),Object(m.B)({eventName:R?"closed":"opened",numberNotificationsTypes:Pe})}})),Pe?i.a.createElement("div",{className:h.a.unreadCount,"data-qa-id":"header-unread-notification-icon"},Pe):""),Boolean(R)&&i.a.createElement(w.a,Object(n.e)({lessons:Ce,language:u,timezone:g,outsideClickIgnoreClass:"ignore-onclickoutside-notification"},{passedHours:A,onAction:Te,handleClickOutside:Te,isTutorNotificationBellActive:_,customSystemMessage:x?[!ve&&ge?i.a.createElement(Xe,{key:"tutor-community-message",language:u,handleTutorCommunityMessageInteraction:be}):null]:[C.showMessage?i.a.createElement(D,{language:u,key:"referral",onActionClick:C.onActionClick,referralMessageIndex:C.referralMessageIndex}):null,Re&&Ie.notificationState?i.a.createElement(G,{key:"kids-search",language:u,subjectAlias:Ie.notificationState.subjectAlias,kidTagAliases:Ie.notificationState.kidTagAliases,onActionClick:Ie.onActionClick}):null,Y?i.a.createElement(Z,{key:"competencies-message",tutoringId:F,subjectAlias:q,onClose:Te}):null,de?i.a.createElement(qe,{key:"group-courses-announcement",language:u,handleGroupCoursesInteraction:fe}):null,ie?i.a.createElement(Le,{key:"preply-rewind-announcement",language:u,handleRewindNotificationInteraction:se,rewindId:ne}):null,Ee?i.a.createElement(Ke,{key:"top-up-hours-notification",showTopUpModal:function(){return je(!0)}}):null,W?i.a.createElement(Se,{language:u}):null].concat(le&&ce.length?Ae:null)})),Boolean(_e)&&i.a.createElement(Oe,{show:!0,entryPoint:"notification",tutorId:Number(we),initialStep:"HOURS_SELECTOR",onClose:function(){return je(!1)}}))}))},1680:function(e,t,a){"use strict";var n=a(6),r=a(0),i=a.n(r),s=a(209),o=a(38),l=a.n(o),c=a(587),u=a(1075),d=a(52);Object(d.a)(".styles_notificationItemBlock__1Uc7A {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1 0 100%;\n  padding: 16px;\n  background-color: #fff;\n  text-align: center;\n  z-index: 1;\n  pointer-events: all;\n  border-bottom: 1px solid #e3e5e6;\n}\n.styles_loader__1fCyt {\n  height: 100px;\n}\n.styles_itemContent__bjigp {\n  flex: 1 1 100%;\n  position: relative;\n  text-align: left;\n  line-height: 1.42857143;\n  white-space: pre-wrap;\n  display: flex;\n}\n.styles_itemText__sczB6 {\n  flex: 1 1 100%;\n}\n.styles_itemText__sczB6.styles_itemText__sczB6.styles_itemText__sczB6 {\n  color: #384047;\n}\n.styles_itemHeader__2myoz.styles_itemHeader__2myoz.styles_itemHeader__2myoz {\n  font-weight: 500;\n  padding-bottom: 8px;\n  color: #384047;\n}\n.styles_itemIconWrap__BO4sW {\n  position: relative;\n  float: left;\n  width: 40px;\n  height: 40px;\n  margin-right: 16px;\n  overflow: hidden;\n  flex: 0 0 auto;\n}\n.styles_itemActions__3pZz4 {\n  flex: 1 1 100%;\n  position: relative;\n  display: flex;\n  margin-top: 16px;\n  white-space: nowrap;\n}\n.styles_itemActions__3pZz4 > * {\n  flex: 1 1;\n}\n.styles_itemButton__ajk0x {\n  margin-left: 8px;\n}\n.styles_itemButtonPrimary__B7dRT {\n  margin-left: 0;\n}\n.styles_itemButtonPrimary__B7dRT:hover {\n  color: #fff;\n}\n");var f={notificationItemBlock:"styles_notificationItemBlock__1Uc7A",loader:"styles_loader__1fCyt",itemContent:"styles_itemContent__bjigp",itemText:"styles_itemText__sczB6",itemHeader:"styles_itemHeader__2myoz",itemIconWrap:"styles_itemIconWrap__BO4sW",itemActions:"styles_itemActions__3pZz4",itemButton:"styles_itemButton__ajk0x",itemButtonPrimary:"styles_itemButtonPrimary__B7dRT"};a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return v}));var m=function(e){var t=e.children,a=e.loading;return i.a.createElement("div",{className:f.notificationItemBlock},a?i.a.createElement(c.a,{className:f.loader}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:f.itemContent},t.icon&&i.a.createElement("div",{className:f.itemIconWrap},t.icon),i.a.createElement("div",{className:f.itemText},t.header&&i.a.createElement("div",{className:f.itemHeader},t.header),t.message)),i.a.createElement("div",{className:f.itemActions},t.primaryAction||null,t.secondaryAction||null)))},g=function(e){var t=e.className,a=e.href,r=e.variant,o=e.children,c=e.primary,d=Object(s.b)(e,["className","href","variant","children","primary"]);return i.a.createElement(u.a,Object(n.e)({},d,{variant:r,href:a,className:l()(t,f.itemButton,Object(n.d)({},f.itemButtonPrimary,c))}),o)},v=function(e){return i.a.createElement(g,Object(n.e)({variant:e.primary?void 0:"outlined"},e))}},1737:function(e,t,a){"use strict";var n=a(40),r=a.n(n),i=a(0),s=a.n(i),o=a(31),l=a.n(o);t.a=function(e){e.styles;var t=r()(e,["styles"]);return s.a.createElement("svg",l()({width:"18",height:"21",viewBox:"0 0 18 21",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 18v-2l1.414-1.414A2 2 0 0 0 2 13.172V9c0-1.556.674-2.98 1.71-4.095A7.695 7.695 0 0 1 7.5 2.68V2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.68C13.37 3.36 16 5.93 16 9v4.172a2 2 0 0 0 .586 1.414L18 16v2H0zm15.172-2H2.828A4 4 0 0 0 4 13.172V9c0-1.916 1.75-3.848 3.963-4.374l1.035-.246 1.04.246C12.256 5.151 14 7.09 14 9v4.172A4.001 4.001 0 0 0 15.172 16zM11.5 19h-5c0 .364.123.705.337 1 .353.486.955.843 1.663.96a3.08 3.08 0 0 0 1 0c.708-.117 1.31-.474 1.663-.96.214-.295.337-.636.337-1z"}))}},2192:function(e,t,a){"use strict";var n=a(52);Object(n.a)(".styles_notificationPopupWrapper__zI0w5 {\n  position: absolute;\n  display: flex;\n  top: 40px;\n  right: -52px;\n  min-height: 40px;\n  max-height: 80vh;\n  z-index: 10001;\n  flex-direction: column;\n  filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.3));\n  transform: translate3d(0, 0, 0);\n}\n.styles_notificationPopupWrapper__zI0w5:before {\n  position: absolute;\n  display: block;\n  content: '';\n  right: 50px;\n  bottom: 100%;\n  border: 8px solid transparent;\n  border-left-width: 12px;\n  border-right-width: 12px;\n  border-bottom-color: #fff;\n  filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.3));\n  z-index: -1;\n}\n.styles_notificationsList__1t7Ca {\n  flex-direction: column;\n  overflow-y: auto;\n  min-width: 266px;\n  border-radius: 8px;\n}\n@media screen and (max-width: 640px) {\n  .styles_notificationsList__1t7Ca {\n    margin-right: 16px;\n  }\n}\n.styles_emptyListMessage__299iG {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1 0 100%;\n  gap: 8px;\n  padding: 16px;\n  background-color: #fff;\n  text-align: center;\n  z-index: 1;\n  pointer-events: all;\n  border-bottom: 1px solid #e3e5e6;\n  border-radius: 8px;\n  white-space: nowrap;\n}\n.styles_emptyListMessage__299iG.styles_emptyListMessage__299iG.styles_emptyListMessage__299iG {\n  color: #384047;\n}\n.styles_notificationIconWrap__1rU0B {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.styles_notificationIconWrapVisible__ukR8f svg path {\n  fill: #3bb3bd;\n  transition: fill 0.2s;\n}\n.styles_notificationIconWrapVisible__ukR8f svg:hover path {\n  fill: #3bb3bd;\n}\n"),t.a={notificationPopupWrapper:"styles_notificationPopupWrapper__zI0w5",notificationsList:"styles_notificationsList__1t7Ca",emptyListMessage:"styles_emptyListMessage__299iG",notificationIconWrap:"styles_notificationIconWrap__1rU0B",notificationIconWrapVisible:"styles_notificationIconWrapVisible__ukR8f"}},2200:function(e,t,a){"use strict";var n=a(6),r=a(0),i=a.n(r),s=a(25),o=a(328),l=a(3),c=a(32),u=a(560),d=a(525),f=a.n(d),m=a(1680),g=a(52);Object(g.a)(".styles_messageStrong__EAvDf {\n  font-weight: 500;\n}\n.styles_avatarImg__3qW6d {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  display: block;\n}\n");var v={messageStrong:"styles_messageStrong__EAvDf",avatarImg:"styles_avatarImg__3qW6d"},b=function(e){var t=e.language,a=e.lesson,i=e.timezone,o=e.onConfirm,c=e.onReport,u="ua"===t?"uk":t,d={month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:i,hour12:!1};return Object(r.createElement)(m.a,null,{icon:Object(r.createElement)("img",{className:v.avatarImg,src:a.tutor.user.profile.avatarUrl,alt:"Notification tutor image","data-qa-group":"notification-tutor-ava-img"}),message:Object(r.createElement)("div",{"data-qa-group":"lesson-confirmation-msg"},Object(r.createElement)(s.a,{defaultMessage:"Did you complete a lesson with {fullName} on {date}?",values:Object(n.h)({},l.formattedMessageAbTestValues,{},{fullName:Object(r.createElement)("b",{className:v.messageStrong},a.tutor.fullName),date:Object(r.createElement)("b",{className:v.messageStrong},function(){try{return new Intl.DateTimeFormat(u,d).format(new Date(a.datetime))}catch(e){return new Date(a.datetime).toLocaleString(u)}}())}),id:'{"defaultMessage":"Did you complete a lesson with {fullName} on {date}?","description":""}'})),primaryAction:Object(r.createElement)(m.b,{primary:!0,href:"/".concat(t,"/lessons?trigger-reload=").concat(Date.now(),"#/rating/").concat(a.id),onClick:o,"data-qa-group":"notification-lesson-confirmation-btns"},Object(r.createElement)(s.a,{defaultMessage:"Confirm lesson",values:l.formattedMessageAbTestValues,id:'{"defaultMessage":"Confirm lesson","description":""}'})),secondaryAction:Object(r.createElement)(m.b,{href:"/".concat(t,"/lessons?trigger-reload=").concat(Date.now(),"#lesson/").concat(a.id,"/report"),onClick:c,"data-qa-group":"notification-lesson-report-btns"},Object(r.createElement)(s.a,{defaultMessage:"Report issue",values:l.formattedMessageAbTestValues,id:'{"defaultMessage":"Report issue","description":""}'}))})},p=a(2192);a.d(t,"a",(function(){return h}));var h=Object(u.a)((function(e){var t=e.lessons,a=e.language,r=e.timezone,u=e.customSystemMessage,d=e.onAction,m=e.isTutorNotificationBellActive,g=u.every((function(e){return null===e}));return i.a.createElement("div",{className:p.a.notificationPopupWrapper},i.a.createElement("div",{className:p.a.notificationsList},f()(t)&&g?i.a.createElement("div",{className:p.a.emptyListMessage,"data-qa-id":"nav-empty-notifications-list"},m?i.a.createElement(o.a,{variant:"xs-medium",color:"gray-400"},i.a.createElement(s.a,{id:"navigation.notification_bell.notifications.title",defaultMessage:"NOTIFICATIONS",values:l.formattedMessageAbTestValues})):null,i.a.createElement(o.a,{variant:"xs",color:"gray-400"},i.a.createElement(s.a,{defaultMessage:"There are no notifications for you",values:l.formattedMessageAbTestValues,id:'{"defaultMessage":"There are no notifications for you","description":""}'}))):t.map((function(e){return i.a.createElement(b,Object(n.e)({key:e.id},{language:a,lesson:e,timezone:r},{onConfirm:function(){d(),Object(c.i)()},onReport:function(){d(),Object(c.G)()}}))})),u))}))},287:function(e,t,a){"use strict";var n=a(6),r=a(0),i=a.n(r);t.a=function(e){e.styles;var t=Object(n.i)(e,["styles"]);return i.a.createElement("svg",Object(n.e)({width:"40",height:"40",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("path",{fill:"#fff",d:"M0 0h48v48H0z"}),i.a.createElement("path",{d:"M6.488 20.418a.42.42 0 00.62-.277l.367-1.738c1.257-5.94 6.108-10.63 12.07-11.667a.42.42 0 10-.144-.828C13.104 7.004 7.981 11.955 6.653 18.23l-.366 1.738a.42.42 0 00.2.45zM41.743 28.395a.42.42 0 00-.646.212l-.541 1.692C38.702 36.08 33.4 40.254 27.363 40.68a.42.42 0 10.06.838c6.375-.45 11.975-4.856 13.933-10.963l.54-1.692a.42.42 0 00-.153-.468z",fill:"#CD4A86",stroke:"#CD4A86",strokeWidth:"2"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.136 19.851c.848-.44 1.535-.036 1.535.905l.002 7.186c0 .941-.687 2.061-1.535 2.502l-11.21 5.92c-.848.441-1.534.037-1.534-.904v-7.187c0-.94.686-2.06 1.534-2.5l11.208-5.922z",fill:"#27E0F6"}),i.a.createElement("path",{d:"M31.011 15.627c.612.31 1.039 1.027.826 1.705-.124.394-.555.73-.927.922l-3.283 1.662-8.04 4.168c-.453.257-1.193.139-1.193-.525 0-.233.159-.414.34-.554l2.84-2.303c-.66-.348-1.332-.813-1.644-.978-.802-.426-.856-1.107-.856-1.367v-7.088c0-.247-.013-.446.063-.69a1.03 1.03 0 011.296-.667c.096.03.172.077.264.127l10.314 5.588z",fill:"#CD4A86"}))}}}]);